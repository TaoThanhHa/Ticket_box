{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhha/ticket_box/components/Wallet-connect.tsx"],"sourcesContent":["\"use client\"\n\nimport { ConnectButton } from \"@iota/dapp-kit\"\n\nexport function WalletConnect() {\n  return (\n    <div style={{ padding: \"1rem\", display: \"flex\", justifyContent: \"flex-end\" }}>\n      <ConnectButton />\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,6LAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,SAAS;YAAQ,gBAAgB;QAAW;kBACzE,cAAA,6LAAC,iLAAa;;;;;;;;;;AAGpB;KANgB"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhha/ticket_box/hooks/useContract.ts"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  useCurrentAccount,\n  useIotaClient,\n  useSignAndExecuteTransaction,\n  useIotaClientQuery,\n} from \"@iota/dapp-kit\";\n\nimport { Transaction } from \"@iota/iota-sdk/transactions\";\nimport { useNetworkVariable } from \"@/lib/config\";\nimport type { IotaObjectData } from \"@iota/iota-sdk/client\";\n\nexport const CONTRACT_MODULE = \"ticket_box::ticket\";\nexport const CONTRACT_METHODS = {\n  CREATE: \"create_ticket\",\n  CLAIM: \"claim_ticket\",\n} as const;\n\n// Hard-coded event used for minting (you can change)\nconst DEFAULT_EVENT = {\n  name: \"Music Festival 2025\",\n  date: \"2025-12-01\",\n  seat: \"A12\",\n  price: 50,\n};\n\nfunction bytesToString(v: number[] | Uint8Array): string {\n  try {\n    if (v instanceof Uint8Array) return new TextDecoder().decode(v);\n    return new TextDecoder().decode(new Uint8Array(v));\n  } catch {\n    return String.fromCharCode(...(v as number[]));\n  }\n}\n\nfunction getTicketBoxFields(data: IotaObjectData): any | null {\n  if (data.content?.dataType !== \"moveObject\") return null;\n\n  const fields = data.content.fields as Record<string, any>;\n  if (!fields.ticket) return null;\n\n  const t = fields.ticket as any;\n\n  return {\n    eventName: bytesToString(t.event_name),\n    date: bytesToString(t.date),\n    seat: bytesToString(t.seat),\n    price: Number(t.price),\n  };\n}\n\nexport const useContract = () => {\n  const currentAccount = useCurrentAccount();\n  const address = currentAccount?.address;\n  const packageId = useNetworkVariable(\"packageId\");\n  const iotaClient = useIotaClient();\n  const { mutate: signAndExecute, isPending } =\n    useSignAndExecuteTransaction();\n\n  const [ticketBoxId, setTicketBoxId] = useState<string | null>(() =>\n    typeof window !== \"undefined\" && address\n      ? localStorage.getItem(`ticketBoxId_${address}`)\n      : null\n  );\n\n  const [claimId, setClaimId] = useState<string | null>(() =>\n    typeof window !== \"undefined\" && address\n      ? localStorage.getItem(`claimId_${address}`)\n      : null\n  );\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [hash, setHash] = useState<string | undefined>();\n  const [txError, setTxError] = useState<Error | null>(null);\n\n  const {\n    data,\n    isPending: isFetching,\n    error: queryError,\n    refetch,\n  } = useIotaClientQuery(\n    \"getObject\",\n    { id: ticketBoxId!, options: { showContent: true, showOwner: true } },\n    { enabled: !!ticketBoxId }\n  );\n\n  const fields = data?.data ? getTicketBoxFields(data.data) : null;\n\n  // --------------------------\n  // CREATE TICKET â€” user enters buyer info, but Move expects only event fields\n  // We therefore pass only the 4 expected args to moveCall and save buyer off-chain.\n  // --------------------------\n  const createTicket = async (\n    buyerName: string,\n    buyerEmail: string,\n    buyerPhone: string\n  ) => {\n    if (!packageId) {\n      setTxError(new Error(\"Missing packageId in config\"));\n      return;\n    }\n\n    try {\n      setTxError(null);\n\n      const tx = new Transaction();\n      // build call: only event_name, date, seat, price (Move signature)\n      tx.moveCall({\n        target: `${packageId}::${CONTRACT_MODULE}::${CONTRACT_METHODS.CREATE}`,\n        arguments: [\n          tx.pure.vector(\"u8\", Array.from(new TextEncoder().encode(DEFAULT_EVENT.name))),\n          tx.pure.vector(\"u8\", Array.from(new TextEncoder().encode(DEFAULT_EVENT.date))),\n          tx.pure.vector(\"u8\", Array.from(new TextEncoder().encode(DEFAULT_EVENT.seat))),\n          tx.pure.u64(DEFAULT_EVENT.price),\n        ],\n      });\n\n      signAndExecute(\n        { transaction: tx as never },\n        {\n          onSuccess: async ({ digest }) => {\n            setHash(digest);\n            setIsLoading(true);\n\n            try {\n              const { effects } = await iotaClient.waitForTransaction({\n                digest,\n                options: { showEffects: true },\n              });\n\n              const created = effects?.created ?? [];\n\n              // find newly created TicketBox object owned by current address\n              const newObj = created.find(\n                (c) =>\n                  typeof c.owner === \"object\" &&\n                  c.owner !== null &&\n                  \"AddressOwner\" in c.owner &&\n                  c.owner.AddressOwner === address\n              );\n\n              const newId = newObj?.reference?.objectId;\n\n              if (newId) {\n                setTicketBoxId(newId);\n                if (address) localStorage.setItem(`ticketBoxId_${address}`, newId);\n\n                // Save buyer info off-chain mapped to this ticketBoxId\n                try {\n                  const booking = {\n                    ticketBoxId: newId,\n                    buyer: { name: buyerName, email: buyerEmail, phone: buyerPhone },\n                    event: DEFAULT_EVENT,\n                    createdAt: new Date().toISOString(),\n                    txDigest: digest,\n                  };\n                  localStorage.setItem(`booking_${newId}`, JSON.stringify(booking));\n                } catch {\n                  // ignore storage error\n                }\n\n                await refetch();\n              }\n            } finally {\n              setIsLoading(false);\n            }\n          },\n          onError: (err) => {\n            setTxError(err instanceof Error ? err : new Error(String(err)));\n          },\n        }\n      );\n    } catch (err) {\n      setTxError(err instanceof Error ? err : new Error(String(err)));\n    }\n  };\n\n  // --------------------------\n  // CLAIM TICKET\n  // --------------------------\n  const claimTicket = async () => {\n    if (!ticketBoxId || !packageId) return;\n\n    try {\n      setTxError(null);\n\n      const tx = new Transaction();\n      tx.moveCall({\n        target: `${packageId}::${CONTRACT_MODULE}::${CONTRACT_METHODS.CLAIM}`,\n        arguments: [tx.object(ticketBoxId)],\n      });\n\n      signAndExecute(\n        { transaction: tx as never },\n        {\n          onSuccess: async ({ digest }) => {\n            setHash(digest);\n            setIsLoading(true);\n\n            try {\n              const { effects } = await iotaClient.waitForTransaction({\n                digest,\n                options: { showEffects: true },\n              });\n\n              const created = effects?.created ?? [];\n\n              const newObj = created.find(\n                (c) =>\n                  typeof c.owner === \"object\" &&\n                  c.owner !== null &&\n                  \"AddressOwner\" in c.owner &&\n                  c.owner.AddressOwner === address\n              );\n\n              const newId = newObj?.reference?.objectId;\n\n              if (newId) {\n                setClaimId(newId);\n                if (address) localStorage.setItem(`claimId_${address}`, newId);\n\n                // also map claim => ticketBox (handy)\n                try {\n                  localStorage.setItem(`claim_to_ticket_${newId}`, ticketBoxId ?? \"\");\n                } catch {}\n              }\n\n              await refetch();\n            } finally {\n              setIsLoading(false);\n            }\n          },\n          onError: (err) => {\n            setTxError(err instanceof Error ? err : new Error(String(err)));\n          },\n        }\n      );\n    } catch (err) {\n      setTxError(err instanceof Error ? err : new Error(String(err)));\n    }\n  };\n\n  return {\n    data: fields,\n    ticketBoxId,\n    claimId,\n    actions: { createTicket, claimTicket },\n    state: {\n      isLoading,\n      isPending,\n      hash,\n      isConfirmed: !!hash && !isLoading && !isPending,\n      error: txError || queryError,\n    },\n    hasValidData: !!fields,\n    isFetching,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhha/ticket_box/components/sample.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useContract } from \"../hooks/useContract\";\nimport { QRCodeSVG } from \"qrcode.react\";\n\nexport default function SampleBooking() {\n  const { actions, state, ticketBoxId, claimId, data } = useContract() as any;\n\n  const DEFAULT_EVENT = {\n    eventName: \"Music Festival 2025\",\n    date: \"2025-12-01\",\n    seat: \"A12\",\n    price: 50,\n  };\n\n  // buyer form\n  const [buyer, setBuyer] = useState({ name: \"\", email: \"\", phone: \"\" });\n  const [error, setError] = useState<string | null>(null);\n  const [createdTicketId, setCreatedTicketId] = useState<string | null>(null);\n  const [bookingData, setBookingData] = useState<any | null>(null);\n\n  // when ticketBoxId changes (created), load booking info from localStorage\n  useEffect(() => {\n    if (!ticketBoxId) return;\n    setCreatedTicketId(ticketBoxId);\n    try {\n      const raw = localStorage.getItem(`booking_${ticketBoxId}`);\n      if (raw) setBookingData(JSON.parse(raw));\n    } catch {}\n  }, [ticketBoxId]);\n\n  // when claimId set, try to assemble QR payload\n  const [qrPayload, setQrPayload] = useState<string | null>(null);\n  useEffect(() => {\n    if (!claimId) return;\n    // find ticket id mapped to this claim if any\n    try {\n      const ticketForClaim = localStorage.getItem(`claim_to_ticket_${claimId}`);\n      const bookingRaw = ticketForClaim ? localStorage.getItem(`booking_${ticketForClaim}`) : null;\n      const booking = bookingRaw ? JSON.parse(bookingRaw) : bookingData;\n\n      const payload = {\n        claimId,\n        ticketBoxId: ticketForClaim ?? ticketBoxId,\n        buyer: booking?.buyer ?? { name: \"\", email: \"\", phone: \"\" },\n        event: booking?.event ?? DEFAULT_EVENT,\n      };\n      setQrPayload(JSON.stringify(payload));\n    } catch {\n      setQrPayload(JSON.stringify({ claimId, ticketBoxId, buyer: bookingData?.buyer ?? buyer }));\n    }\n  }, [claimId, bookingData, ticketBoxId, buyer]);\n\n  const validateBuyer = () => {\n    if (!buyer.name.trim()) return \"Vui lÃ²ng nháº­p tÃªn.\";\n    const emailRe = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRe.test(buyer.email)) return \"Email khÃ´ng há»£p lá»‡.\";\n    const phoneDigits = buyer.phone.replace(/\\D/g, \"\");\n    if (phoneDigits.length < 7) return \"Sá»‘ Ä‘iá»‡n thoáº¡i ngáº¯n quÃ¡.\";\n    return null;\n  };\n\n  const handleCreate = async () => {\n    setError(null);\n    const v = validateBuyer();\n    if (v) {\n      setError(v);\n      return;\n    }\n    try {\n      await actions.createTicket(buyer.name, buyer.email, buyer.phone);\n    } catch (err: any) {\n      setError(err?.message || String(err));\n    }\n  };\n\n  const handleClaim = async () => {\n    try {\n      await actions.claimTicket();\n    } catch (err: any) {\n      setError(err?.message || String(err));\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white flex items-center justify-center p-6\">\n      <div className=\"w-full max-w-lg bg-neutral-900/90 rounded-[50px] p-8 shadow-2xl border border-neutral-800\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-blue-400\">ðŸŽ« Booking Ticket</h1>\n\n        <div className=\"mb-6 bg-neutral-800 p-5 rounded-3xl border border-neutral-700\">\n          <h2 className=\"text-xl font-semibold mb-2\">Event Details</h2>\n          <p><b>Event:</b> {DEFAULT_EVENT.eventName}</p>\n          <p><b>Date:</b> {DEFAULT_EVENT.date}</p>\n          <p><b>Seat:</b> {DEFAULT_EVENT.seat}</p>\n          <p><b>Price:</b> {DEFAULT_EVENT.price} MIOTA</p>\n        </div>\n\n        <div className=\"bg-neutral-800 p-5 rounded-3xl border border-neutral-700 mb-4\">\n          <h2 className=\"text-xl font-semibold mb-4\">Buyer Information</h2>\n          <div className=\"space-y-4\">\n            <input className=\"w-full bg-neutral-700 p-3 rounded-2xl text-white focus:ring focus:ring-blue-500 outline-none\"\n              placeholder=\"Name\" value={buyer.name} onChange={(e) => setBuyer({ ...buyer, name: e.target.value })} />\n            <input className=\"w-full bg-neutral-700 p-3 rounded-2xl text-white focus:ring focus:ring-blue-500 outline-none\"\n              placeholder=\"Email\" value={buyer.email} onChange={(e) => setBuyer({ ...buyer, email: e.target.value })} />\n            <input className=\"w-full bg-neutral-700 p-3 rounded-2xl text-white focus:ring focus:ring-blue-500 outline-none\"\n              placeholder=\"Phone\" value={buyer.phone} onChange={(e) => setBuyer({ ...buyer, phone: e.target.value })} />\n\n            <button onClick={handleCreate}\n              disabled={state?.isLoading || state?.isPending}\n              className=\"w-full bg-blue-600 text-white py-3 rounded-2xl text-lg font-semibold hover:bg-blue-700 transition disabled:bg-gray-500\">\n              {state?.isPending ? \"Processing...\" : \"Create Ticket\"}\n            </button>\n\n            {error && <p className=\"text-red-500\">{error}</p>}\n          </div>\n        </div>\n\n        {/* After creation show ticketBoxId and allow claim */}\n        {createdTicketId && (\n          <div className=\"mb-4 bg-neutral-800 p-4 rounded-xl border border-neutral-700\">\n            <p className=\"text-sm text-gray-300\">TicketBox ID:</p>\n            <p className=\"font-mono break-words\">{createdTicketId}</p>\n            <div className=\"mt-3 flex gap-2\">\n              <button onClick={handleClaim}\n                className=\"px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700\">Claim Ticket</button>\n              <button onClick={() => {\n                try { navigator.clipboard.writeText(createdTicketId); } catch {}\n              }} className=\"px-4 py-2 bg-gray-700 rounded-lg\">Copy ID</button>\n            </div>\n          </div>\n        )}\n\n        {/* After claim show QR */}\n        {claimId && qrPayload && (\n          <div className=\"mt-4 bg-neutral-800 p-4 rounded-xl border border-neutral-700 text-center\">\n            <p className=\"mb-2 text-sm text-gray-300\">Claim ID</p>\n            <p className=\"font-mono break-words mb-3\">{claimId}</p>\n            <div className=\"mx-auto w-48 h-48 bg-white p-2 inline-block rounded-lg\">\n              <QRCodeSVG value={qrPayload} size={180} />\n            </div>\n            <p className=\"mt-3 text-sm text-gray-300\">Scan this QR at the event.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}